<div id="size-guide-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="size-guide-title" style="display: none;">
  <div class="modal__overlay" data-modal-overlay></div>
  <div class="modal__content">
    <div class="modal__header">
      <h2 id="size-guide-title">{{ 'products.product.size_guide' | t }}</h2>
      <button type="button" class="modal__close" data-modal-close aria-label="{{ 'accessibility.close' | t }}">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M15.833 4.167l-11.666 11.666m0-11.666l11.666 11.666" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
      </button>
    </div>
    <div class="modal__body">
      <div class="size-guide">
        <p class="size-guide__intro">{{ 'products.product.size_guide_intro' | t }}</p>

        <div class="size-guide__measurements">
          <table class="size-guide__table">
            <thead>
              <tr>
                <th>{{ 'products.product.size' | t }}</th>
                <th>{{ 'products.product.circumference_mm' | t }}</th>
                <th>{{ 'products.product.diameter_mm' | t }}</th>
                <th>{{ 'products.product.us_size' | t }}</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>{{ 'products.product.size_xs' | t }}</td><td>44-46</td><td>14-14.6</td><td>3</td></tr>
              <tr><td>{{ 'products.product.size_s' | t }}</td><td>47-49</td><td>14.9-15.6</td><td>3.5-4</td></tr>
              <tr><td>{{ 'products.product.size_m' | t }}</td><td>50-52</td><td>15.9-16.6</td><td>4.5-5</td></tr>
              <tr><td>{{ 'products.product.size_l' | t }}</td><td>53-55</td><td>16.9-17.5</td><td>5.5-6</td></tr>
              <tr><td>{{ 'products.product.size_xl' | t }}</td><td>56-58</td><td>17.8-18.5</td><td>6.5-7</td></tr>
            </tbody>
          </table>
        </div>

        <div class="size-guide__tips">
          <h3>{{ 'products.product.measurement_tips' | t }}</h3>
          <ul>
            <li>{{ 'products.product.measurement_tip_1' | t }}</li>
            <li>{{ 'products.product.measurement_tip_2' | t }}</li>
            <li>{{ 'products.product.measurement_tip_3' | t }}</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const modal = document.getElementById('size-guide-modal');
  const openButtons = document.querySelectorAll('[data-size-guide]');
  const closeButtons = modal.querySelectorAll('[data-modal-close]');
  const overlay = modal.querySelector('[data-modal-overlay]');

  openButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      modal.style.display = 'block';
      document.body.style.overflow = 'hidden';
    });
  });

  function closeModal() {
    modal.style.display = 'none';
    document.body.style.overflow = '';
  }

  closeButtons.forEach(button => {
    button.addEventListener('click', closeModal);
  });

  overlay.addEventListener('click', closeModal);

  // ESC key support
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && modal.style.display === 'block') {
      closeModal();
    }
  });
});
</script>

<style>
.modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 9999;
}

.modal__overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
}

.modal__content {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: white;
  max-width: 90vw;
  max-height: 90vh;
  overflow-y: auto;
  border-radius: 8px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
}

.modal__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 24px;
  border-bottom: 1px solid #e5e5e5;
}

.modal__close {
  background: none;
  border: none;
  cursor: pointer;
  padding: 8px;
  border-radius: 4px;
}

.modal__close:hover {
  background: #f5f5f5;
}

.modal__body {
  padding: 24px;
}

.size-guide__table {
  width: 100%;
  border-collapse: collapse;
  margin: 24px 0;
}

.size-guide__table th,
.size-guide__table td {
  padding: 12px;
  text-align: left;
  border-bottom: 1px solid #e5e5e5;
}

.size-guide__table th {
  font-weight: 600;
  background: #f9f9f9;
}

.size-guide__tips {
  margin-top: 32px;
}

.size-guide__tips h3 {
  margin-bottom: 16px;
  font-size: 18px;
}

.size-guide__tips ul {
  list-style: disc;
  padding-left: 20px;
}

.size-guide__tips li {
  margin-bottom: 8px;
}

@media (max-width: 768px) {
  .modal__content {
    width: 95vw;
    max-height: 95vh;
  }

  .size-guide__table {
    font-size: 14px;
  }

  .size-guide__table th,
  .size-guide__table td {
    padding: 8px 4px;
  }
}
</style>
