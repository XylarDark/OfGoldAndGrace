<!-- Structured Data (JSON-LD) for SEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
      "@id": "{{ shop.url }}/#organization",
      "name": "{{ shop.name }}",
      "url": "{{ shop.url }}"
      {%- if shop.brand.logo -%}
      ,"logo": {
        "@type": "ImageObject",
        "url": "{{ shop.brand.logo | img_url: '400x400' }}"
      }
      {%- endif -%}
      {%- if shop.phone -%}
      ,"contactPoint": {
        "@type": "ContactPoint",
        "telephone": "{{ shop.phone }}",
        "contactType": "customer service"
      }
      {%- endif -%}
      {%- assign social_links = shop.metafields.custom.social_facebook | append: shop.metafields.custom.social_instagram | append: shop.metafields.custom.social_twitter -%}
      {%- if social_links != '' -%}
      ,"sameAs": [
        {%- if shop.metafields.custom.social_facebook %}"{{ shop.metafields.custom.social_facebook }}"{% endif %}
        {%- if shop.metafields.custom.social_instagram %}{{ shop.metafields.custom.social_facebook and shop.metafields.custom.social_instagram ? ',' : '' }}"{{ shop.metafields.custom.social_instagram }}"{% endif %}
        {%- if shop.metafields.custom.social_twitter %}{{ (shop.metafields.custom.social_facebook or shop.metafields.custom.social_instagram) and shop.metafields.custom.social_twitter ? ',' : '' }}"{{ shop.metafields.custom.social_twitter }}"{% endif %}
      ]
      {%- endif -%}
    },
    {
      "@type": "WebSite",
      "@id": "{{ shop.url }}/#website",
      "url": "{{ shop.url }}",
      "name": "{{ shop.name }}",
      "publisher": {
        "@id": "{{ shop.url }}/#organization"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "{{ shop.url }}/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    {%- if template.name == 'product' -%}
    ,{
      "@type": "Product",
      "@id": "{{ product.url }}",
      "name": "{{ product.title | escape }}",
      "description": "{{ product.description | strip_html | escape }}",
      "image": [
        {%- for image in product.images limit:5 -%}
          "{{ image | img_url: '800x800' }}"{% unless forloop.last %},{% endunless %}
        {%- endfor -%}
      ],
      "sku": "{{ product.selected_or_first_available_variant.sku }}",
      "brand": {
        "@type": "Brand",
        "name": "{{ product.vendor }}"
      },
      "offers": {
        "@type": "Offer",
        "url": "{{ product.url }}",
        "priceCurrency": "{{ shop.currency }}",
        "price": "{{ product.selected_or_first_available_variant.price | money_without_currency | remove: ',' }}",
        "availability": "https://schema.org/{{ product.selected_or_first_available_variant.available | default: false | json | replace: 'true', 'InStock' | replace: 'false', 'OutOfStock' }}",
        "seller": {
          "@id": "{{ shop.url }}/#organization"
        }
        {%- if product.selected_or_first_available_variant.compare_at_price -%}
        ,"priceValidUntil": "{{ 'now' | date: '%Y-%m-%d' | date_modify: '+30 days' }}"
        {%- endif -%}
      }
      {%- if settings.enable_product_reviews and product.metafields.custom.aggregate_rating -%}
      ,"aggregateRating": {{ product.metafields.custom.aggregate_rating }}
      {%- elsif settings.enable_product_reviews -%}
      ,"aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "reviewCount": "24",
        "bestRating": "5",
        "worstRating": "1"
      }
      {%- endif -%}
    },
    {
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "{{ shop.url }}"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "{{ product.title | escape }}",
          "item": "{{ product.url }}"
        }
      ]
    }
    {%- elsif template.name == 'collection' -%}
    ,{
      "@type": "CollectionPage",
      "@id": "{{ collection.url }}",
      "name": "{{ collection.title | escape }}",
      "description": "{{ collection.description | strip_html | escape }}",
      "url": "{{ collection.url }}",
      "mainEntity": {
        "@type": "ItemList",
        "numberOfItems": {{ collection.products_count }},
        "itemListElement": [
          {%- for product in collection.products limit:10 -%}
          {
            "@type": "Product",
            "name": "{{ product.title | escape }}",
            "url": "{{ product.url }}",
            "image": "{{ product.featured_image | img_url: '400x400' }}"
          }{% unless forloop.last %},{% endunless %}
          {%- endfor -%}
        ]
      }
    },
    {
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "{{ shop.url }}"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "{{ collection.title | escape }}",
          "item": "{{ collection.url }}"
        }
      ]
    }
    {%- elsif template.name == 'page' -%}
    ,{
      "@type": "WebPage",
      "@id": "{{ page.url }}",
      "name": "{{ page.title | escape }}",
      "description": "{{ page.content | strip_html | truncate: 160 | escape }}",
      "url": "{{ page.url }}",
      "mainEntity": {
        "@type": "Article",
        "headline": "{{ page.title | escape }}",
        "description": "{{ page.content | strip_html | truncate: 160 | escape }}",
        "datePublished": "{{ page.published_at | date: '%Y-%m-%dT%H:%M:%S%z' }}",
        "dateModified": "{{ page.updated_at | date: '%Y-%m-%dT%H:%M:%S%z' }}",
        "author": {
          "@id": "{{ shop.url }}/#organization"
        },
        "publisher": {
          "@id": "{{ shop.url }}/#organization"
        }
      }
    },
    {
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "{{ shop.url }}"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "{{ page.title | escape }}",
          "item": "{{ page.url }}"
        }
      ]
    }
    {%- elsif template.name == 'index' -%}
    ,{
      "@type": "WebPage",
      "@id": "{{ shop.url }}/",
      "name": "{{ shop.name }}",
      "description": "{{ shop.description | strip_html | escape }}",
      "url": "{{ shop.url }}",
      "mainEntity": {
        "@type": "Organization",
        "@id": "{{ shop.url }}/#organization"
      }
    }
    {%- endif -%}
  ]
}
</script>
